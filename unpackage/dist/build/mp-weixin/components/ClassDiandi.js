(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/ClassDiandi"],{3440:function(t,e,s){},"517f":function(t,e,s){"use strict";var n=s("3440"),a=s.n(n);a.a},6240:function(t,e,s){"use strict";s.r(e);var n=s("90cb"),a=s("7a81");for(var i in a)"default"!==i&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s("517f");var o,c=s("f0c5"),l=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);e["default"]=l.exports},"77ea":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(s("60fa")),a=o(s("bec9")),i=o(s("1a6b"));function o(t){return t&&t.__esModule?t:{default:t}}var c=function(){s.e("components/Popup").then(function(){return resolve(s("60a7"))}.bind(null,s)).catch(s.oe)},l={components:{popup:c},data:function(){return{ifhot:!0,ifJoin:!1,ifcreate:!1,title:"加入班级",link:"创建班级",init:!0,customIndex:[0,0,0],onlyArray:[[],[],[]],customArray:"",classID:"",creatClassName:"",currectClass:!1,classList:"",questionList:["你们班的班歌是什么","你们班有多少人脱单了","你们班总共聚过多少次会","你们班第一次班级聚会是在哪里举办的"],question:"",answer:"",ReqID:"",ifNote:!1,noteData:""}},props:{classCode:String,classId:String,login:Boolean},watch:{classCode:function(){this.login&&this.inviJoin()},login:function(){this.login&&this.inviJoin()}},mounted:function(){"code"===wx.getStorageSync("bgColor")?this.ifhot=!1:this.ifhot=!0,this.login&&this.inviJoin(),this.customArray=a.default.data;for(var t={customArray:this.customArray,customIndex:this.customIndex,onlyArray:this.onlyArray},e=0;e<t.customArray.length;e++)t.onlyArray[0].push(t.customArray[e].value);for(var s=0;s<t.customArray[t.customIndex[0]].childs.length;s++)t.onlyArray[1].push(t.customArray[t.customIndex[0]].childs[s].value);for(var n=0;n<t.customArray[t.customIndex[0]].childs[t.customIndex[1]].childs.length;n++)t.onlyArray[2].push(t.customArray[t.customIndex[0]].childs[t.customIndex[1]].childs[n].value);this.onlyArray=t.onlyArray},methods:{inviJoin:function(){var e=this;""!=this.classCode&&n.default.getRequest("/class/user",{code:this.classCode,id:parseInt(this.classId)},(function(s){200===s.data.code?(i.default.note("加入班级成功",e,3e3),t.report("join_class","加入班级"),n.default.getRequest("/user/profile",{},(function(t){200===t.data.code&&(getApp().globalData.personal=t.data.data,setTimeout((function(){e.$emit("getclass",!0)}),800))}),(function(t){console.log(t)}),"GET")):i.default.note(s.data.msg,e,3e3)}),(function(t){console.log(t)}),"POST","application/json")},_join:function(e){var s=this;this.login?(this.ReqID=this.classList[e].id,this.classList[e].direct?n.default.getRequest("/class/user",{id:this.ReqID},(function(e){200===e.data.code&&(i.default.note("加入班级成功",s),t.report("join_class","加入班级"),n.default.getRequest("/user/profile",{},(function(t){200===t.data.code&&(getApp().globalData.personal=t.data.data,setTimeout((function(){s.$emit("getclass",!0)}),800))}),(function(t){console.log(t)}),"GET"))}),(function(t){console.log(t)}),"POST"):(this.ifJoin=!0,this.question=this.questionList[this.classList[e].question])):this.$emit("toLogin",!1)},_confirmJoin:function(){var e=this;n.default.getRequest("/class/user",{id:this.ReqID,answer:this.answer},(function(s){10001===s.data.code?i.default.note("已拥有班级",e):10003===s.data.code?i.default.note("加入班级失败",e):200===s.data.code&&(i.default.note("成功加入班级",e),t.report("join_class","加入班级"),n.default.getRequest("/user/profile",{},(function(t){200===t.data.code&&(getApp().globalData.personal=t.data.data,setTimeout((function(){e.$emit("getclass",!0)}),800))}),(function(t){console.log(t)}),"GET")),setTimeout((function(){e.ifJoin=!1}),1e3)}),(function(t){console.log(t)}),"POST")},_cancelJoin:function(){this.ifJoin=!1},_tocreate:function(){this.ifcreate?(this.ifcreate=!1,this.title="加入班级",this.link="创建班级"):(this.ifcreate=!0,this.title="创建班级",this.link="加入班级")},create:function(){var t=this;this.login?n.default.getRequest("/class",{university:this.onlyArray[2][this.customIndex[2]],name:this.creatClassName},(function(e){200===e.data.code?(i.default.note("创建班级成功",t),n.default.getRequest("/user/profile",{},(function(e){200===e.data.code&&(getApp().globalData.personal=e.data.data,setTimeout((function(){t.$emit("getclass",!0)}),800))}),(function(t){console.log(t)}),"GET")):500===e.data.code?i.default.note("网络出现问题，请稍后再试",t):10002===e.data.code?i.default.note("已拥有班级",t):i.default.note(e.data.msg,t)}),(function(t){console.log("error",t)}),"POST"):this.$emit("toLogin",!1)},bindCustomPickerChange:function(t){this.customArray,this.customIndex,this.onlyArray;this.customIndex=t.detail.value,this.$set(this.customIndex,0,t.detail.value[0]),this.$set(this.customIndex,1,t.detail.value[1]),this.$set(this.customIndex,2,t.detail.value[2])},bindCustomPickerColumnChange:function(t){this.init=!1;var e=this.customArray,s=this.customIndex,n=this.onlyArray;s[t.detail.column]=t.detail.value;var a=function(){for(var t=0;t<e.length;t++){var a=[],i=[];if(t==s[0]){for(var o=0;o<e[t].childs.length;o++)if(a.push(e[t].childs[o].value),o==s[1]){for(var c=0;c<e[t].childs[o].childs.length;c++)i.push(e[t].childs[o].childs[c].value);n[2]=i}n[1]=a}}};switch(t.detail.column){case 0:s[1]=0,s[2]=0,a();break;case 1:s[2]=0,a();break}this.customIndex=s,this.$set(this.onlyArray,0,n[0]),this.$set(this.onlyArray,1,n[1]),this.$set(this.onlyArray,2,n[2])},searchClass:function(){var t=this;this.classList="",this.currectClass=!1,wx.request({url:"https://wy.lujiahaoo.cn/dddx/api/class/search",data:{key:this.classID},header:{"content-type":"application/json"},method:"GET",success:function(e){200===e.data.code&&(null!=e.data.data?(t.currectClass=!0,t.classList=e.data.data):i.default.note("未找到班级",t))},fail:function(t){console.log(t)}})}}};e.default=l}).call(this,s("543d")["default"])},"7a81":function(t,e,s){"use strict";s.r(e);var n=s("77ea"),a=s.n(n);for(var i in n)"default"!==i&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},"90cb":function(t,e,s){"use strict";var n,a=function(){var t=this,e=t.$createElement;t._self._c},i=[];s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return i})),s.d(e,"a",(function(){return n}))}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/ClassDiandi-create-component',
    {
        'components/ClassDiandi-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("6240"))
        })
    },
    [['components/ClassDiandi-create-component']]
]);
